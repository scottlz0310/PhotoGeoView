# PhotoGeoView ファイル操作機能 - 追加実装リスト

## 既に実装済み
- ✅ ナビゲーションバー（← → ↑ ボタン + パンくず）
- ✅ ファイル一覧表示
- ✅ ステータスバー表示
- ✅ 地図表示とExif読み込み
- ✅ UI切り替え（パネルオンオフ、スライダー等）

## 追加が必要な機能

### 1. ファイル選択機能
```typescript
□ 単一選択（クリック）
□ 複数選択（Ctrl+クリック）
□ 範囲選択（Shift+クリック）
□ 全選択（Ctrl+A）
□ 矢印キーでの選択移動
□ 選択状態の視覚的フィードバック
```

### 2. 基本ファイル操作（IPC経由）
```typescript
□ ファイル/フォルダの移動
□ ファイル/フォルダのコピー
□ ファイル/フォルダの削除（ゴミ箱へ）
□ ファイル/フォルダのリネーム
□ 新規フォルダ作成
```

### 3. クリップボード機能
```typescript
□ コピー操作（Ctrl+C）
□ 切り取り操作（Ctrl+X）
□ 貼り付け操作（Ctrl+V）
□ クリップボード状態の保持
□ ステータスバーにクリップボード状態表示
```

### 4. マウス操作
```typescript
□ ダブルクリック
  - フォルダ: フォルダを開く
  - ファイル: デフォルトアプリで開く
□ 右クリックメニュー（コンテキストメニュー）
  - 開く
  - コピー
  - 切り取り
  - 貼り付け
  - 削除
  - 名前の変更
  - プロパティ
□ ドラッグ&ドロップ
  - ファイル → フォルダへドロップ（移動）
  - Ctrl押しながらドロップ（コピー）
```

### 5. キーボードショートカット
```typescript
□ Ctrl+A: 全選択
□ Ctrl+C: コピー
□ Ctrl+X: 切り取り
□ Ctrl+V: 貼り付け
□ Delete: 削除
□ F2: 名前の変更
□ Ctrl+Shift+N: 新規フォルダ
□ Backspace: 上の階層へ
□ Enter: 選択項目を開く
□ 矢印キー: 選択移動（+ Shift で範囲選択）
```

### 6. 地図連動機能
```typescript
□ 選択ファイル（複数可）→ 地図に複数ピン表示
□ 地図のピンクリック → Exif編集機能
□ 選択ファイルのハイライト表示
□ 複数選択時の地図ズーム調整（全ピンが見える範囲に）

※ 後回し:
⏸️ 地図上での矩形選択 → ファイル選択
```

### 7. UI/UXの追加要素
```typescript
□ インライン編集（リネーム時）
□ 確認ダイアログ（削除時など）
□ トースト通知（操作成功/失敗）
□ ローディング表示（大量ファイル操作時）
□ エラー表示（操作失敗時）
□ ステータスバーに操作状態表示
  - 「3件を選択中」
  - 「2件をコピー中」
  - 「クリップボード: 5件のファイル」
```

### 8. ファイルシステム監視
```typescript
□ ファイル/フォルダの追加検知
□ ファイル/フォルダの削除検知
□ ファイル/フォルダの変更検知
□ 自動リフレッシュ
```

### 9. エラーハンドリング
```typescript
□ 同名ファイルの処理
  - 上書き確認
  - リネームして保存
  - スキップ
□ アクセス権限エラー
□ ディスク容量不足エラー
□ ファイルが使用中エラー
```
### 10. Exif編集機能（新規追加）
□ 地図ピンポップアップにExif編集UI追加
□ 撮影日時の編集（input[type="datetime-local"]）
□ Main ProcessでのExif書き込み実装
□ 保存後のファイルリスト・地図更新
□ エラーハンドリング（書き込み失敗時）

※ Phase 2以降で実装
⏸️ 他のExif項目の編集（位置情報、カメラ設定など）
## 実装の優先順位

### 🔥 Phase 1（最優先・3セッション）
必須の基本機能：
1. ファイル選択機能
2. IPC通信基盤（move, copy, delete, rename）
3. 右クリックメニュー
4. キーボードショートカット（Ctrl+C/X/V, Delete）
5. 地図連動（選択→ピン表示）

**ここまでで日常使用可能**

### ⭐ Phase 2（重要・2セッション）
利便性向上：
1. ドラッグ&ドロップ
2. インライン編集（リネーム）
3. 新規フォルダ作成
4. ファイルシステム監視

**より快適に使える**

### 💡 Phase 3（改善・1-2セッション）
細かいUX改善：
1. 確認ダイアログ
2. トースト通知
3. エラーハンドリングの充実
4. 同名ファイル処理

**完成度が上がる**

## 技術的な実装方針

### Main Process（Electron）
- IPC handlers で各ファイル操作を実装
- `fs-extra` を使用
- `electron.shell.trashItem()` でゴミ箱へ削除
- `chokidar` でファイル監視

### Renderer Process（React）
- Zustand で選択状態とクリップボード管理
- TanStack Query でファイルリスト取得・キャッシュ
- shadcn/ui でコンテキストメニュー
- 既存の地図コンポーネントと連動

これで全体像が整理できましたか？実装を始める前に確認したいことがあれば教えてください！