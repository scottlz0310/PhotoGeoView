# コントリビューションガイド

PhotoGeoViewへの貢献に興味を持っていただきありがとうございます！
このプロジェクトはオープンソースであり、バグ報告、機能提案、プルリクエストなど、あらゆる形での貢献を歓迎します。

## 目次

1. [行動規範](#行動規範)
2. [バグ報告](#バグ報告)
3. [機能リクエスト](#機能リクエスト)
4. [開発の始め方](#開発の始め方)
5. [プルリクエストのガイドライン](#プルリクエストのガイドライン)
6. [コーディング規約](#コーディング規約)

## 行動規範

私たちは、オープンで友好的な環境を維持することを目指しています。すべての参加者に対して、敬意を持って接してください。

## バグ報告

バグを発見した場合は、GitHub Issuesで報告してください。報告には以下の情報を含めてください：

- **再現手順**: バグを再現するための具体的な手順
- **期待される動作**: 本来どうあるべきか
- **実際の動作**: 実際に何が起きたか
- **環境情報**: OS、アプリのバージョンなど
- **スクリーンショット**: 可能であれば

## 機能リクエスト

新しい機能のアイデアがある場合は、GitHub Issuesで提案してください。「Feature Request」ラベルを使用し、その機能がなぜ必要か、どのように機能すべきかを詳しく説明してください。

## 開発の始め方

開発環境のセットアップについては、[README.md](./README.md)を参照してください。

基本的なコマンド:

```bash
# 依存関係のインストール
pnpm install

# 開発サーバーの起動
pnpm tauri dev

# リンターとフォーマッターの実行
pnpm check
```

## デバッグとログ

### ログの確認方法

開発中は以下のコマンドでログを確認できます：

```bash
# ログファイルをリアルタイム監視
pnpm logs:watch

# ログファイルの内容を表示
pnpm logs:view
```

ログファイルはOSごとの標準的なログディレクトリに出力されます：
- **Windows**: `%LOCALAPPDATA%\com.tauri.dev\photogeoview\logs`
- **macOS**: `~/Library/Logs/com.tauri.dev/photogeoview`
- **Linux**: `$XDG_DATA_HOME/com.tauri.dev/photogeoview/logs`

### 構造化ログ

Rust側では `tracing` クレートを使用した構造化ログを導入しています。
非同期処理の追跡やパフォーマンス分析のために、主要な関数には `#[tracing::instrument]` 属性が付与されています。

## プルリクエストのガイドライン

1. **トピックブランチを作成する**: `main`ブランチから新しいブランチを作成してください。
   - 例: `feature/add-new-filter`, `fix/map-rendering-bug`
2. **小さな変更を心がける**: レビューしやすくするため、変更はできるだけ小さく保ってください。
3. **テストを追加する**: 新しい機能やバグ修正には、可能な限りテストを追加してください。
4. **ドキュメントを更新する**: 必要に応じてREADMEやドキュメントを更新してください。
5. **コミットメッセージ**: 明確で記述的なメッセージを使用してください。日本語でも英語でも構いません。

## コーディング規約

プロジェクトの品質を保つため、以下の規約に従ってください。

### TypeScript / React

- **コンポーネント**: PascalCase (`PhotoList.tsx`)
- **関数・変数**: camelCase (`selectPhoto`)
- **型定義**: 明示的な型定義を推奨します。`any`の使用は避けてください。
- **フォーマッター**: Biomeを使用しています。コミット前に`pnpm check`を実行してください。

### Rust

- **命名規則**: Rustの標準的な命名規則（snake_caseなど）に従ってください。
- **エラーハンドリング**: `unwrap()`の使用は避け、適切なエラーハンドリングを行ってください。
- **フォーマッター**: `cargo fmt`を使用してください。
- **ログ出力**: `tracing`クレートを使用してください。
  - `tracing::info!`, `tracing::error!` などを使用し、`println!`は避けてください。
  - 関数には `#[tracing::instrument]` 属性を付与して、トレース可能にすることを推奨します。

### コミットフック

このプロジェクトでは`lefthook`を使用しており、コミット時に自動的にリントと型チェックが実行されます。

---

ご協力ありがとうございます！
